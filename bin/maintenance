#! /bin/bash

# Clean downloads folder
echo "Cleaning downloads folder..."
find ~/tmp/ -type f -mtime +10 -exec rm -f {} \;
find ~/tmp/ -type d -empty -exec rmdir {} \;
mkdir -p ~/tmp/

rm -rf ~/.tmp
mkdir ~/.tmp

# Backup installed packages
echo "Backing up installed packges..."
~/.confighome/pacman/backup

# Update with pacman
echo "Cleaning pacman orphans and cache"
sudo pacman -Syu
# Autoremove with pacman
sudo pacman -Rns $(sudo pacman -Qtdq)
# Clear pacman cache
sudo pacman -Scc
# Clear general cache
echo "Clearing general cache"
find ~/.cache/ -type f -mtime +10 -exec rm -f {} \;
find ~/.cache/ -type d -empty -exec rmdir {} \;
mkdir -p ~/.cache/

# Push newest versions of scripts and configs to github
cd ~/.confighome && git add . && git commit -m "Maintenance of `date`" && git push
